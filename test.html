<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Pay - Cash App</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="guard.js"></script>
    <style>
      @font-face {
        font-family: "CashMarket";
        font-style: normal;
        src: url(font/CashMarket-MediumRounded.otf);
        font-display: swap;
      }
      @font-face {
        font-family: "CashMarketNav";
        font-style: normal;
        src: url(font/CashMarket-RegularRounded.otf);
        font-display: swap;
      }
      :root {
        --header-height: 55px;
        --padding-screen: 20px;
        --footer-height: 60px;
        --accent-green: #00d54b;
        --text-on-green: #ffffff;
        --font-family: "CashMarket", -apple-system, BlinkMacSystemFont,
          sans-serif;
        --font-family-nav: "CashMarketNav", -apple-system, BlinkMacSystemFont,
          sans-serif;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }
      html,
      body {
        height: 100%;
        overflow: hidden;
        font-family: var(--font-family);
      }
      body {
        background-color: var(--accent-green);
        color: var(--text-on-green);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }
      a {
        text-decoration: none;
        color: inherit;
      }
      .pay-app-container {
        max-width: 450px;
        width: 100%;
        height: 100%;
        margin: 0 auto;
        display: grid;
        grid-template-rows: var(--header-height) 1fr var(--footer-height);
        position: relative;
      }

      /* Header */
      .pay-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 var(--padding-screen);
        flex-shrink: 0;
      }
      .header-icon {
        font-size: 28px;
        color: white;
      }
      .profile-icon-wrapper {
        position: relative;
        width: 38px;
        height: 38px;
      }
      .profile-icon {
        width: 100%;
        height: 100%;
        object-fit: cover;
        fill: white;
      }
      .notification-badge {
        position: absolute;
        top: -1px;
        right: -3px;
        background-color: #ff453a;
        color: white;
        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        font-weight: 600;
        font-size: 11px;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid var(--accent-green);
      }

      /* Main Content Area */
      .pay-main {
        display: flex;
        flex-direction: column;
        justify-content: flex-end; /* Pushes content to the bottom */
        padding: 0 var(--padding-screen);
        overflow: hidden;
      }

      /* Amount Display */
      .amount-display {
        flex-grow: 1; /* Takes up all available space */
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding-bottom: 3vh; /* Space above keypad */
      }
      .amount-text {
        font-size: clamp(90px, 25vw, 130px);
        font-weight: 500;
        line-height: 1;
        transition: transform 0.1s ease-in-out; /* For pop animation */
      }

      /* Keypad */
      .pay-keypad {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2.5vh 20px; /* Precise vertical/horizontal gap */
        margin-bottom: 4vh; /* Space between keypad and action buttons */
      }
      .keypad-btn {
        background: none;
        border: none;
        color: var(--text-on-green);
        font-family: var(--font-family);
        font-size: 2rem; /* Larger font size */
        font-weight: 500;
        padding: 10px 0;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 50px;
        transition: transform 0.08s ease-out, background-color 0.15s ease; /* Smooth scale transition */
      }
      .keypad-btn:active {
        transform: scale(1.15); /* Scale up effect on click */
      }
      .keypad-btn .fa-circle {
        font-size: 0.5rem; /* Larger decimal point */
        vertical-align: middle;
      }
      .keypad-btn svg {
        width: 1.5rem;
        height: 1.5rem;
      }

      /* Action Buttons */
      .pay-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px; /* Space between buttons */
        margin-bottom: 20px; /* Space above footer */
      }
      .action-btn {
        background-color: rgba(0, 0, 0, 0.15);
        color: rgba(255, 255, 255, 0.5);
        border: none;
        border-radius: 30px; /* More rounded corners */
        padding: 15px;
        font-family: var(--font-family);
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .action-btn:not(:disabled) {
        background-color: #ffffff; /* White when active */
        color: #000000; /* Black text when active */
      }

      /* Footer */
      .bottom-nav {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        align-items: center;
        padding: 0 10px;
        height: 100%;
      }
      .nav-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        font-family: var(--font-family-nav);
        font-weight: 600;
        color: rgba(255, 255, 255, 0.7);
        font-size: 16px;
      }
      .nav-button svg {
        fill: rgba(255, 255, 255, 0.7);
        margin-bottom: 4px; /* Space between icon and text if any */
      }
      .nav-button.active {
        color: var(--text-on-green);
      }
      .nav-button.active svg {
        fill: var(--text-on-green);
      }
      .nav-button-b {
        font-family: var(--font-family);
        font-size: 24px;
        font-weight: 500;
      }
    </style>
  </head>
  <body>
    <div class="pay-app-container">
      <header class="pay-header">
        <a href="#"><i class="fa-solid fa-qrcode header-icon"></i></a>
        <a href="profile.html" class="profile-icon-wrapper">
          <!-- Icon matching the screenshot -->
          <svg
            class="profile-icon"
            viewBox="0 0 36 36"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M18 36C8.059 36 0 27.941 0 18S8.059 0 18 0s18 8.059 18 18-8.059 18-18 18zM9.9 28.52c.486-.811 1.6-1.996 3.255-2.586a10.82 10.82 0 0110.02 0c1.655.59 2.769 1.775 3.255 2.586A14.935 14.935 0 0118 33C14.161 33 10.74 31.253 9.9 28.52zM18 21a6 6 0 110-12 6 6 0 010 12z"
            ></path>
          </svg>
          <div class="notification-badge">1</div>
        </a>
      </header>

      <main class="pay-main">
        <div class="amount-display">
          <h1 class="amount-text" id="amount-text">$10</h1>
        </div>

        <div class="pay-keypad" id="pay-keypad">
          <button class="keypad-btn" data-key="1">1</button>
          <button class="keypad-btn" data-key="2">2</button>
          <button class="keypad-btn" data-key="3">3</button>
          <button class="keypad-btn" data-key="4">4</button>
          <button class="keypad-btn" data-key="5">5</button>
          <button class="keypad-btn" data-key="6">6</button>
          <button class="keypad-btn" data-key="7">7</button>
          <button class="keypad-btn" data-key="8">8</button>
          <button class="keypad-btn" data-key="9">9</button>
          <button class="keypad-btn" data-key=".">
            <i class="fas fa-circle"></i>
          </button>
          <button class="keypad-btn" data-key="0">0</button>
          <button class="keypad-btn" data-key="<">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="4.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M15 18L9 12L15 6"></path>
            </svg>
          </button>
        </div>

        <div class="pay-actions">
          <button class="action-btn" id="request-btn">Request</button>
          <button class="action-btn" id="pay-btn">Pay</button>
        </div>
      </main>

      <nav class="bottom-nav">
        <!-- Footer icons exactly from the image -->
        <button class="nav-button" aria-label="Home">$20</button>
        <button class="nav-button" aria-label="Cards">
          <svg width="24" height="18" viewBox="0 0 24 18" fill="none">
            <path
              d="M2.5 0A2.5 2.5 0 000 2.5v13A2.5 2.5 0 002.5 18h19a2.5 2.5 0 002.5-2.5v-13A2.5 2.5 0 0021.5 0h-19zM1.5 2.5a1 1 0 011-1h19a1 1 0 011 1v2H1.5v-2zm0 3.5h21v9a1 1 0 01-1 1h-19a1 1 0 01-1-1v-9z"
              fill-rule="evenodd"
              clip-rule="evenodd"
            ></path>
          </svg>
        </button>
        <button class="nav-button active" aria-label="Pay">
          <svg width="15" height="23" viewBox="0 0 15 23">
            <path
              d="M12.675 6.89C12.923 7.14 13.336 7.14 13.569 6.89l1.242-1.299c.264-.25.249-.7-.029-.97-1.007-.855-2.14-1.507-3.37-1.918L11.835.805C11.919.39 11.611 0 11.199 0H8.794c-.151 0-.296.054-.412.152a.669.669 0 00-.19.48l-.348 1.688C5.24 3.053 2.897 4.687 2.897 8.035c0 2.9 2.241 4.144 4.611 4.998 2.241.86 3.429 1.18 3.429 2.4C10.937 16.664 9.754 17.394 8.005 17.394c-1.59 0-3.26-.534-4.552-1.839a.46.46 0 00-.658 0L1.197 16.904a.98.98 0 000 1.418C2.241 19.323 3.562 20.072 5.069 20.487l-.368 1.784c-.084.414.22.795.632.8H8.143c.152 0 .299-.053.417-.15.118-.096.2-.23.228-.38l.348-1.693C12.586 20.287 14.932 18.153 14.932 15.04c0-2.868-2.336-4.077-5.168-5.062-1.62-.604-3.02-1.02-3.02-2.263 0-1.21 1.307-1.69 2.618-1.69 1.67 0 3.275.694 4.324 1.644l.01-.01z"
            ></path>
          </svg>
        </button>
        <button class="nav-button" aria-label="Activity">
          <svg width="24" height="14" viewBox="0 0 24 14" fill="none">
            <path
              d="M1.53.43a1.5 1.5 0 012.35 1.8l-1.12 2.24 3.9-3.9a1.5 1.5 0 012.12 2.12L5.4 6.07l4.6-4.6a1.5 1.5 0 012.12 2.12l-4.6 4.6 3.28-1.64a1.5 1.5 0 011.34 2.68L9.9 12.57a1.5 1.5 0 01-2.12-2.12l2.24-1.12-3.9 3.9a1.5 1.5 0 01-2.12-2.12l3.38-3.38L2.7 11.97a1.5 1.5 0 11-2.12-2.12L4.16 6.27 1.43 3.54a1.5 1.5 0 01-.12-2.12l.22-.29h-.001zM22.47.43a1.5 1.5 0 00-2.35 1.8l1.12 2.24-6.04-6.04a1.5 1.5 0 00-2.12 2.12l6.04 6.04-3.28 1.64a1.5 1.5 0 101.34 2.68l2.24-1.12a1.5 1.5 0 00-1.34-2.68l-1.12.56 6.04-6.04a1.5 1.5 0 00-2.12-2.12l-6.04 6.04-.56-1.12a1.5 1.5 0 00-2.68 1.34l1.12 2.24a1.5 1.5 0 002.12-2.12l-1.12-2.24 6.04 6.04a1.5 1.5 0 102.12-2.12L19.84 6.27l2.73-2.73a1.5 1.5 0 00.12-2.12l-.22-.29z"
              opacity=".7"
            ></path>
            <path d="M0 12.5a1.5 1.5 0 013 0v-11a1.5 1.5 0 01-3 0v11z"></path>
          </svg>
        </button>
        <button class="nav-button nav-button-b" aria-label="Bitcoin">B</button>
      </nav>
    </div>

    <script>
      const amountText = document.getElementById("amount-text");
      const keypad = document.getElementById("pay-keypad");
      const requestBtn = document.getElementById("request-btn");
      const payBtn = document.getElementById("pay-btn");

      let amountValue = "10"; // Set initial value to match image

      // Animation for the amount text
      function animateAmount() {
        amountText.style.transform = "scale(1.05)";
        setTimeout(() => {
          amountText.style.transform = "scale(1)";
        }, 80);
      }

      function updateDisplay() {
        const numericValue = parseFloat(amountValue) || 0;

        if (numericValue === 0 && !amountValue.includes(".")) {
          amountText.innerHTML = "$0";
        } else {
          const parts = amountValue.split(".");
          // Format with commas, but only if it's not starting with a lone "0"
          const integerPart =
            parts[0] === "0"
              ? "0"
              : parseFloat(parts[0] || 0).toLocaleString("en-US");
          amountText.innerHTML =
            parts.length > 1
              ? `$${integerPart}.${parts[1]}`
              : `$${integerPart}`;
        }

        const isEnabled = numericValue > 0;
        requestBtn.disabled = !isEnabled;
        payBtn.disabled = !isEnabled;
      }

      function handleKeyPress(key) {
        if (key === "<") {
          // Backspace
          if (amountValue.length > 1) {
            amountValue = amountValue.slice(0, -1);
          } else {
            amountValue = "0";
          }
        } else if (key === ".") {
          // Decimal point
          if (!amountValue.includes(".")) {
            amountValue += ".";
          }
        } else {
          // Number keys
          const decimalPart = amountValue.split(".")[1];
          if (decimalPart && decimalPart.length >= 2) {
            return; // Don't allow more than 2 decimal places
          }

          if (amountValue === "0") {
            amountValue = key;
          } else {
            // Limit total length to prevent overflow
            if (amountValue.replace(".", "").length < 10) {
              amountValue += key;
            }
          }
        }
        updateDisplay();
        animateAmount(); // Trigger animation on each key press
      }

      keypad.addEventListener("click", (e) => {
        const btn = e.target.closest(".keypad-btn");
        if (btn && btn.dataset.key) {
          handleKeyPress(btn.dataset.key);
        }
      });

      payBtn.addEventListener("click", () => {
        if (parseFloat(amountValue) > 0) {
          localStorage.setItem("paymentAmount", amountValue);
          window.location.href = "contact-pay.html";
        }
      });

      // Initial load
      document.addEventListener("DOMContentLoaded", () => {
        updateDisplay();
      });
    </script>
    <script src="footer.display.js"></script>
  </body>
</html>