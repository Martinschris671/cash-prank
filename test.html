<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0"
    />
    <title>Cash App Payment</title>
    <!-- Font Awesome CDN for the Chevron Icon -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      @font-face {
        font-family: "CashMarket";
        font-style: normal;
        src: url(font/CashSans.ttf);
        font-display: swap;
      }
      /* CSS Reset and Global Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }
      html,
      body {
        height: 100%;
        overflow: hidden;
      }
      body {
        font-family: "CashMarket", -apple-system, BlinkMacSystemFont, sans-serif;
        background-color: #ffffff;
        color: #000000;
      }
      .container {
        max-width: 420px;
        margin: 0 auto;
        height: 100%;
        background-color: #ffffff;
        display: flex;
        flex-direction: column;
        position: relative;
      }

      /* --- Fixed Top Section (Header + Inputs + Suggested Title) --- */
      .fixed-top-content {
        background-color: #ffffff;
        position: relative;
        z-index: 10;
        padding: 0 16px;
        flex-shrink: 0;
      }
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        position: relative;
        padding-bottom: 0px;
      }
      .header::after {
        content: "";
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 1px;
        background-color: #f0f0f0;
      }
      .close-btn {
        background: none;
        border: none;
        color: #000000;
        font-size: 40px;
        font-weight: 400;
        cursor: pointer;
      }
      .amount {
        font-size: 17px;
        font-weight: 600;
      }
      .pay-btn {
        background-color: #f2f2f7;
        color: #bcbcc0;
        border: none;
        padding: 6px 17px;
        border-radius: 16px;
        font-size: 15px;
        font-weight: 600;
        cursor: not-allowed;
        transition: background-color 0.2s, color 0.2s;
        font-family: "CashMarket", -apple-system, BlinkMacSystemFont, sans-serif;
      }
      .pay-btn.active {
        background-color: #00d54b;
        color: #ffffff;
        cursor: pointer;
      }

      .input-group {
        display: flex;
        align-items: center;
        border-bottom: 1px solid #f0f0f0;
        padding: 14px 0;
      }
      .input-label {
        color: #000000;
        font-size: 15px;
        font-weight: 600;
        min-width: 35px;
      }
      .input-field {
        flex: 1;
        background: transparent;
        border: none;
        color: #000000;
        font-size: 15px;
        padding: 7px 0;
        outline: none;
      }
      .input-field::placeholder {
        color: #c7c7cc;
      }
      .note-icon img {
        width: 24px;
        height: 24px;
        background-image: url("icons/stars_17753644.png");
      }

      .payment-method {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        cursor: pointer;
      }
      .payment-left {
        display: flex;
        align-items: center;
        gap: 1px;
      }
      .cash-app-icon {
        padding-left: 0px;
      }
      .cash-app-icon img {
        gap: 0;
        width: 25px;
        height: 25px;
      }
      .balance-info {
        color: #000000;
        font-size: 14px;
        font-weight: 580;
        padding-left: 0.3rem;
      }
      .chevron {
        color: #c7c7cc;
        font-size: 16px;
        padding-right: 10px;
        font-weight: lighter;
      }

      .suggested-title {
        font-size: 20px;
        font-weight: 700;
        margin-top: 7px;
        margin-bottom: 10px;
      }

      /* --- Scrollable Content Section --- */
      .scrollable-content {
        flex-grow: 1;
        overflow-y: auto;
        padding: 0 16px;
      }
      .contact-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 15px 0;
        cursor: pointer;
      }
      .contact-details {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-grow: 1;
      }
      .avatar {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background-size: cover;
        background-position: center;
        background-color: #e5e5ea;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-size: 20px;
        font-weight: 500;
      }
      .contact-info {
        display: flex;
        flex-direction: column;
        gap: 1px;
      }
      .contact-name {
        font-size: 16px;
        font-weight: 600;
      }
      .contact-handle {
        color: #8a8a8e;
        font-size: 14px;
        font-weight: 400;
      }
      .checkbox {
        width: 24px;
        height: 24px;
        border: 2px solid #c7c7cc;
        border-radius: 50%;
        background: transparent;
        position: relative;
      }
      .contact-item.selected .checkbox {
        border-color: #00d54b;
        background-color: #00d54b;
      }
      .contact-item.selected .checkbox::after {
        content: "✓";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #fff;
        font-size: 14px;
        font-weight: bold;
      }

      /* --- Payment Selection Modal --- */
      .payment-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.4);
        display: none;
        align-items: flex-end;
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .payment-overlay.active {
        display: flex;
        opacity: 1;
      }
      .payment-modal {
        background: #f9f9f9;
        border-radius: 20px 20px 0 0;
        width: 100%;
        padding: 8px 16px 24px 16px;
        transform: translateY(100%);
        transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      }
      .payment-overlay.active .payment-modal {
        transform: translateY(0);
      }
      .modal-handle {
        width: 40px;
        height: 5px;
        background: #d1d1d6;
        border-radius: 2.5px;
        margin: 0 auto 16px;
      }
      .payment-modal-header {
        text-align: center;
        margin-bottom: 12px;
      }
      .payment-modal-title {
        color: #000;
        font-size: 16px;
        font-weight: 600;
      }
      .payment-option {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 0;
        border-bottom: 1px solid #e5e5ea;
        cursor: pointer;
      }
      .payment-option:last-of-type {
        border-bottom: none;
      }
      .payment-option-left {
        display: flex;
        align-items: center;
        gap: 16px;
      }
      .payment-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .payment-icon.cash {
        background-color: #00d54b;
        border: 1px solid #e5e5ea;
      }
      .payment-icon.cash img {
        width: 30px;
        height: 30px;
      }
      .payment-icon.visa img {
        width: 30px;
        height: 30px;
      }
      .payment-icon.visa {
        background-color: #ffffff;
        border: 1px solid #e5e5ea;
      }
      .payment-option-info {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }
      .payment-option-title {
        color: #000;
        font-size: 16px;
        font-weight: 400;
      }
      .payment-option-subtitle {
        color: #8a8a8e;
        font-size: 14px;
      }
      .radio-button {
        width: 22px;
        height: 22px;
        border: 2px solid #c7c7cc;
        border-radius: 50%;
        position: relative;
      }
      .radio-button.selected {
        border-color: #00d54b;
        background: #00d54b;
      }
      .radio-button.selected::after {
        content: "✓";
        color: #fff;
        font-size: 14px;
        font-weight: bold;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .continue-btn {
        background: #ffffff;
        color: #000000;
        border: 1px solid #d1d1d6;
        padding: 16px;
        border-radius: 30px;
        font-size: 18px;
        font-weight: 600;
        width: 100%;
        cursor: pointer;
        margin-top: 24px;
        transition: background-color 0.2s;
      }
      .continue-btn:active {
        background-color: #e5e5ea;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- FIXED TOP CONTENT -->
      <div class="fixed-top-content">
        <header class="header">
          <button class="close-btn">×</button>
          <div class="amount">$547</div>
          <button class="pay-btn" id="payBtn">Pay</button>
        </header>
        <div class="form-section">
          <div class="input-group">
            <label for="toInput" class="input-label">To</label>
            <input
              type="text"
              id="toInput"
              class="input-field"
              placeholder="Name, $Cashtag, Phone, Email"
            />
          </div>
          <div class="input-group">
            <label for="forInput" class="input-label">For</label>
            <input
              type="text"
              id="forInput"
              class="input-field"
              placeholder="Note (required)"
            />
            <div class="note-icon">
              <img src="icons/stars_17753644.png" alt="" />
            </div>
          </div>
          <div class="input-group">
            <div class="payment-method" id="paymentMethod">
              <div class="payment-left">
                <span class="input-label">Use</span>
                <div id="mainPaymentIcon" class="cash-app-icon">
                  <img src="icons/Cash_App-Logo.wine.png" alt="" />
                </div>
                <div id="mainPaymentInfo" class="balance-info">
                  Cash balance: $53,936.23
                </div>
              </div>
              <div class="chevron"><i class="fas fa-chevron-down"></i></div>
            </div>
          </div>
        </div>
        <h2 class="suggested-title">Suggested</h2>
      </div>

      <!-- SCROLLABLE CONTENT -->
      <div class="scrollable-content"><div id="contactList"></div></div>

      <!-- PAYMENT MODAL OVERLAY -->
      <div class="payment-overlay" id="paymentOverlay">
        <div class="payment-modal">
          <div class="modal-handle"></div>
          <div class="payment-modal-header">
            <div class="payment-modal-title">Select a payment method</div>
          </div>
          <div class="payment-option" id="cashOption">
            <div class="payment-option-left">
              <div class="payment-icon cash">
                <img
                  src="icons/Cash_App-Logo.wine.png"
                  alt="Cash Icon"
                  height="16"
                />
              </div>
              <div class="payment-option-info">
                <div class="payment-option-title">Cash balance</div>
                <div class="payment-option-subtitle">$53,936.23</div>
              </div>
            </div>
            <div class="radio-button"></div>
          </div>
          <div class="payment-option" id="visaOption">
            <div class="payment-option-left">
              <div class="payment-icon visa">
                <img
                  src="icons/mastercard-2-logo-svgrepo-com.png"
                  alt="Visa Icon"
                  height="12"
                />
              </div>
              <div class="payment-option-info">
                <div class="payment-option-title">Debit card •••• 4042</div>
              </div>
            </div>
            <div class="radio-button"></div>
          </div>
          <button class="continue-btn" id="continueBtn">Continue</button>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // --- DATA ---
        const contactsData = [
          {
            name: "John Seaman",
            handle: "$john",
            avatarUrl: "https://i.imgur.com/3YQ5YfG.png",
          },
          {
            name: "Elenis Colpetzer",
            handle: "$elaelaborate",
            avatarUrl: "https://i.imgur.com/sC5IarI.png",
          },
          {
            name: "Kathleen Gerth",
            handle: "$kathiasmith",
            avatarUrl: "https://i.imgur.com/KqYw1U5.png",
          },
          {
            name: "John Butler",
            handle: "$johnny32",
            avatarUrl: "https://i.imgur.com/J4Dm8aU.png",
          },
          {
            name: "unknown",
            handle: "$cxshoutkyy",
            avatarUrl: "https://i.imgur.com/b5qgL3S.png",
          },
          {
            name: "Sho UE Lutfiddinova",
            handle: "$sholutfiddinova",
            initial: "S",
            bgColor: "#1877F2",
          },
        ];

        // --- DOM ELEMENTS ---
        const payBtn = document.getElementById("payBtn"),
          toInput = document.getElementById("toInput"),
          forInput = document.getElementById("forInput"),
          contactListEl = document.getElementById("contactList"),
          paymentOverlay = document.getElementById("paymentOverlay"),
          paymentMethodRow = document.getElementById("paymentMethod"),
          continueBtn = document.getElementById("continueBtn"),
          mainPaymentIcon = document.getElementById("mainPaymentIcon"),
          mainPaymentInfo = document.getElementById("mainPaymentInfo");

        // --- STATE ---
        let selectedContact = null;
        let activePaymentMethod = "cash"; // 'cash' or 'visa'

        // --- FUNCTIONS ---
        function renderContacts() {
          contactListEl.innerHTML = contactsData
            .map((contact, index) => {
              const avatarStyle = contact.avatarUrl
                ? `background-image: url('${contact.avatarUrl}')`
                : `background-color: ${contact.bgColor};`;
              const avatarContent = contact.avatarUrl ? "" : contact.initial;
              return `
                        <div class="contact-item" data-index="${index}">
                            <div class="contact-details">
                                <div class="avatar" style="${avatarStyle}">${avatarContent}</div>
                                <div class="contact-info">
                                    <div class="contact-name">${contact.name}</div>
                                    <div class="contact-handle">${contact.handle}</div>
                                </div>
                            </div>
                            <div class="checkbox"></div>
                        </div>
                    `;
            })
            .join("");
          document
            .querySelectorAll(".contact-item")
            .forEach((item) =>
              item.addEventListener("click", handleContactSelection)
            );
        }

        function handleContactSelection(event) {
          const clickedItem = event.currentTarget;
          if (clickedItem.classList.contains("selected")) {
            selectedContact = null;
            clickedItem.classList.remove("selected");
            toInput.value = "";
          } else {
            document
              .querySelectorAll(".contact-item.selected")
              .forEach((sel) => sel.classList.remove("selected"));
            selectedContact =
              contactsData[parseInt(clickedItem.dataset.index, 10)];
            clickedItem.classList.add("selected");
            toInput.value = selectedContact.name;
          }
          updatePayButtonState();
        }

        function updatePayButtonState() {
          payBtn.classList.toggle(
            "active",
            (selectedContact || toInput.value.trim()) && forInput.value.trim()
          );
        }

        function openModal() {
          updateModalUI(activePaymentMethod);
          paymentOverlay.style.display = "flex";
          setTimeout(() => paymentOverlay.classList.add("active"), 10);
        }

        function closeModal() {
          paymentOverlay.classList.remove("active");
          setTimeout(() => (paymentOverlay.style.display = "none"), 300);
        }

        function handlePaymentOptionSelection(e) {
          const selectedId = e.currentTarget.id;
          updateModalUI(selectedId === "cashOption" ? "cash" : "visa");
        }

        function updateModalUI(selection) {
          document
            .getElementById("cashOption")
            .querySelector(".radio-button")
            .classList.toggle("selected", selection === "cash");
          document
            .getElementById("visaOption")
            .querySelector(".radio-button")
            .classList.toggle("selected", selection === "visa");
        }

        function updateMainPaymentDisplay(method) {
          if (method === "cash") {
            mainPaymentIcon.innerHTML =
              '<img src="icons/Cash_App-Logo.wine.png" alt="Visa Icon">';
            mainPaymentInfo.textContent = "Cash balance: $53,936.23";
          } else if (method === "visa") {
            mainPaymentIcon.innerHTML =
              '<img src="icons/mastercard-2-logo-svgrepo-com.png"  alt="Visa Icon">';
            mainPaymentIcon.style.backgroundColor = "#FFFFFF";
            mainPaymentInfo.textContent = "Debit card •••• 4042";
          }
        }

        // --- EVENT LISTENERS ---
        toInput.addEventListener("input", updatePayButtonState);
        forInput.addEventListener("input", updatePayButtonState);
        paymentMethodRow.addEventListener("click", openModal);
        paymentOverlay.addEventListener("click", (e) => {
          if (e.target === paymentOverlay) closeModal();
        });

        continueBtn.addEventListener("click", () => {
          const isCashSelected = document
            .getElementById("cashOption")
            .querySelector(".radio-button")
            .classList.contains("selected");
          activePaymentMethod = isCashSelected ? "cash" : "visa";
          updateMainPaymentDisplay(activePaymentMethod);
          closeModal();
        });

        document
          .querySelectorAll(".payment-modal .payment-option")
          .forEach((option) =>
            option.addEventListener("click", handlePaymentOptionSelection)
          );

        // --- INITIALIZATION ---
        renderContacts();
      });
    </script>
  </body>
</html>
